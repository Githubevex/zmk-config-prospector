# Prospector Scanner - Touch Mode Override
# This file is applied on top of prospector_scanner.conf
# Enables touch panel with swipe navigation and settings screens

# Enable touch mode
CONFIG_PROSPECTOR_TOUCH_ENABLED=y

# ============== Display Configuration ==============
CONFIG_ZMK_DISPLAY=y
CONFIG_DISPLAY=y
CONFIG_LVGL=y
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_CUSTOM=y

# LVGL memory pool
CONFIG_LV_Z_MEM_POOL_SIZE=32768

# Reduce screen flickering with double buffering
CONFIG_LV_Z_DOUBLE_VDB=y
CONFIG_LV_Z_VDB_SIZE=30

# Display thread stack
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=y
CONFIG_ZMK_DISPLAY_DEDICATED_THREAD_STACK_SIZE=8192
CONFIG_MAIN_STACK_SIZE=4096

# GPIO for backlight
CONFIG_GPIO=y

# Number of layer indicators shown on screen
CONFIG_PROSPECTOR_MAX_LAYERS=7        # Range: 4-10

# Disable ambient light sensor
CONFIG_PROSPECTOR_USE_AMBIENT_LIGHT_SENSOR=n

# Set fixed brightness (0-100%)
CONFIG_PROSPECTOR_FIXED_BRIGHTNESS=85

# Auto-dim when no keyboard activity
CONFIG_PROSPECTOR_SCANNER_TIMEOUT_MS=480000      # 8 minutes (0=disabled)
CONFIG_PROSPECTOR_SCANNER_TIMEOUT_BRIGHTNESS=5   # Dim to 5%

# ============== LVGL Widgets ==============
CONFIG_LV_USE_LABEL=y
CONFIG_LV_USE_BAR=y
CONFIG_LV_USE_FLEX=y

# Widgets for settings screens (compiled but not used in non-touch mode)
CONFIG_LV_USE_SLIDER=y
CONFIG_LV_USE_SWITCH=y
CONFIG_LV_USE_BUTTON=y

# ============== Fonts ==============
CONFIG_LV_FONT_MONTSERRAT_12=y
CONFIG_LV_FONT_MONTSERRAT_16=y
CONFIG_LV_FONT_MONTSERRAT_18=y
CONFIG_LV_FONT_MONTSERRAT_20=y
CONFIG_LV_FONT_MONTSERRAT_28=y
CONFIG_LV_FONT_DEFAULT_MONTSERRAT_20=y
CONFIG_LV_FONT_UNSCII_8=y
CONFIG_LV_FONT_UNSCII_16=y

# ============== Scanner Mode ==============
CONFIG_BT=y
CONFIG_BT_OBSERVER=y
CONFIG_PROSPECTOR_MODE_SCANNER=y

CONFIG_PROSPECTOR_LAYER_SLIDE_DEFAULT=y

# Layer slide animation (default: disabled, works in both touch and non-touch modes)
# To enable slide animation by default: CONFIG_PROSPECTOR_LAYER_SLIDE_DEFAULT=y

# Multi-keyboard support
CONFIG_PROSPECTOR_MULTI_KEYBOARD=y
CONFIG_PROSPECTOR_MAX_KEYBOARDS=5     # Monitor up to 5 keyboards

# ============== PWM Backlight ==============
CONFIG_PWM=y
CONFIG_LED=y
CONFIG_LED_PWM=y

# ============== Disable Optional Features ==============
CONFIG_ZMK_SPLIT=n
CONFIG_ZMK_STUDIO=n
CONFIG_PM_DEVICE=n

# Battery and light sensor disabled by default
# To enable: CONFIG_PROSPECTOR_BATTERY_SUPPORT=y
# To enable: CONFIG_PROSPECTOR_USE_AMBIENT_LIGHT_SENSOR=y
CONFIG_I2C=y
